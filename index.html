<!DOCTYPE html>
<html lang="id">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.3.2/css/flag-icons.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>Nusantara-Komik</title>
    <style>
      :root {
        --primary: linear-gradient(135deg, #FF5E5B, #FF8E42);
        --dark: #121212;
        --dark-arsenic: #2D2D2D;
        --text-dark: #B0B0B0;
        --dark-main: #1E1E1E;
        --text-semi-dark: #E0E0E0;
        --card: #252525;
        --border-dark: #3A3A3A;
        --text-light: #FFFFFF;
        --text: var(--text-semi-dark);
        --hover-dark: #333333;
        --active-dark: #3A3A3A;
        --shadow-dark: rgba(0, 0, 0, 0.3);
        --header-height: 120px;
      }
      
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: system-ui, -apple-system, sans-serif;
      }
      
      body {
        background-color: var(--dark-main);
        color: var(--text-semi-dark);
        padding-top: var(--header-height);
        transition: padding-top 0.3s ease;
      }
      
      body.header-hidden {
        padding-top: 0;
      }
      
      
      header {
        background: var(--dark);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
        box-shadow: 0 2px 10px var(--shadow-dark);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px 15px;
        height: var(--header-height);
        transition: transform 0.3s ease;
        will-change: transform;
        border-bottom: 1px solid var(--border-dark);
      }
      
      header.hidden {
        transform: translateY(-100%);
      }
      
      .logo-container {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        width: 100%;
        max-width: 600px;
      }
      
      .user-profile {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
      }
      
      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        flex-shrink: 0;
      }
      
      .user-info {
        display: flex;
        flex-direction: column;
      }
      
      .welcome-text {
        font-size: 0.7rem;
        color: rgba(255, 255, 255, 0.8);
        line-height: 1;
      }
      
      .username {
        font-weight: 600;
        font-size: 0.9rem;
        color: white;
        margin-top: 2px;
        line-height: 1.2;
      }
      
      .user-btn-bell, .user-btn-menu {
        background: none;
        border: none;
        color: var(--text-semi-dark);
        cursor: pointer;
        position: relative;
        flex-shrink: 0;
        transition: color 0.2s ease;
      }
      
      .user-btn-bell:hover {
        color: var(--text-light);
      }
      
      .user-btn-bell {
        font-size: 1.3rem;
      }
      
      .badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        width: 13px;
        height: 13px;
        font-size: 0.6rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .toggle-theme {
      	  display: none;
      	}
      	
      	.toggle-label {
      	  cursor: pointer;
      	  font-size: 1.5rem;
      	  color: var(--text-semi-dark);
      	  margin-right: 10px;
      	}
      	
      	.toggle-label .fa-sun {
      	  display: none;
      	}
      	
      	.toggle-theme:checked + .toggle-label .fa-moon {
      	  display: none;
      	}
      	
      	.toggle-theme:checked + .toggle-label .fa-sun {
      	  display: inline;
      	}
      
      .search-profile-row {
        width: 100%;
        max-width: 600px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .search-bar {
        flex: 1;
      }
      
      .search-bar input {
        background-color: var(--dark-arsenic);
        width: 100%;
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid var(--border-dark);
        font-size: 1rem;
        outline: none;
        color: var(--text-semi-dark);
        transition: border-color 0.2s ease;
      }
      
      .search-bar input:focus {
        border-color: var(--primary);
      }
      
      .search-bar input::placeholder {
        color: var(--text-dark);
        opacity: 0.7;
      }
      
      
      main {
        position: relative;
        min-height: calc(100vh - var(--header-height));
        padding: 15px;
        max-width: 1000px;
        margin: 0 auto;
        padding-bottom: 70px;
        background-color: var(--dark-main);
      }
      
      
      .content-view {
        display: none;
        opacity: 0;
        transition: opacity 0.3s ease;
        position: absolute;
        width: 100%;
        will-change: opacity;
        backface-visibility: hidden;
        transform: translateZ(0);
      }
      
      .content-view.active {
        display: block;
        opacity: 1;
        position: relative;
      }
      
      
      .recommendation-section {
        margin-bottom: 20px;
      }
      
      .recommendation-title {
        font-weight: bold;
        margin-bottom: 8px;
        font-size: 1rem;
        color: var(--text-semi-dark);
      }
      
      .recommendation-scroll {
        display: flex;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        gap: 15px;
        padding: 0 0 5px;
      }
      
      .recommendation-scroll::-webkit-scrollbar {
        display: none;
      }
      
      .recommendation-card {
        scroll-snap-align: center;
        flex: 0 0 99.9%;
        aspect-ratio: 16 / 9;
        background-color: var(--card);
        border: 1px solid var(--border-dark);
        border-radius: 3px;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transition: transform 0.2s ease;
      }
      
      .recommendation-card .comic-info {
        margin-top: auto;
        text-align: center;
        padding: 10px;
        color: #333;
      }
      
      .recommendation-card .comic-title {
        font-weight: 600;
        font-size: 0.9rem;
        margin: 0;
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
        color: var(--text-semi-dark);
      }
      
      .recommendation-card .chapter-overlay {
        position: absolute;
        top: 6px;
        left: 6px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        font-size: 0.6rem;
        font-weight: bold;
        padding: 3px 6px;
        border-radius: 3px;
        z-index: 2;
      }
      
      .recommendation-indicator {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 10px;
      }
      
      .recommendation-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: var(--dark-arsenic);
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      
      .recommendation-dot.active {
        background: var(--primary);
      }
      
      
      .genre-section {
        margin: 20px 0;
        position: relative;
      }
      
      .genre-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      
      .genre-title {
        font-weight: bold;
        font-size: 1rem;
        color: var(--text-semi-dark);
      }
      
      .genre-toggle {
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 15px;
        padding: 6px 12px;
        font-size: 0.8rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: transform 0.2s ease;
      }
      
      .genre-toggle:hover {
        transform: scale(1.05);
      }
      
      .selected-genres {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 10px;
      }
      
      .selected-genre {
        background: var(--primary);
        color: white;
        border-radius: 15px;
        padding: 6px 12px;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: 5px;
      }
      
      .selected-genre .remove-genre {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 0.8rem;
        padding: 0;
        display: flex;
        transition: transform 0.2s ease;
      }
      
      .selected-genre .remove-genre:hover {
        transform: scale(1.2);
      }
      
      .no-genres-selected {
        color: var(--text-dark);
        font-size: 0.9rem;
        padding: 5px 0;
      }
      
      
      .genre-popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        z-index: 100;
        display: none;
        justify-content: center;
        align-items: center;
      }
      
      .genre-popup-content {
        background: var(--dark);
        width: 90%;
        max-width: 500px;
        max-height: 80vh;
        border-radius: 10px;
        padding: 20px 15px;
        overflow-y: auto;
        border: 1px solid var(--border-dark);
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      }
      
      .genre-popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding: 0 5px;
      }
      
      .genre-popup-title {
        font-weight: bold;
        font-size: 1.2rem;
        color: var(--text-semi-dark);
      }
      
      .close-popup {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-dark);
        padding: 0 5px;
        transition: color 0.2s ease;
      }
      
      .close-popup:hover {
        color: var(--text-semi-dark);
      }
      
      .genre-popup-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 10px;
        padding: 0;
      }
      
      .genre-popup-button {
        background-color: var(--card);
        border: 1px solid var(--border-dark);
        border-radius: 8px;
        padding: 8px 5px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
        margin: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        color: var(--text-semi-dark);
      }
      
      .genre-popup-button:hover {
        background-color: var(--hover-dark);
      }
      
      .genre-popup-button.active {
        background: var(--primary);
        color: white;
        border-color: transparent;
      }
      
      
      .comic-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
      }
      
      .comic-card {
        overflow: hidden;
        transition: transform 0.2s ease;
      }
      
      .comic-cover {
        width: 100%;
        aspect-ratio: 195 / 285;
        border-radius: 2px;
        background-color: var(--card);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-dark);
        font-size: 0.8rem;
        border: 1px solid var(--border-dark);
        position: relative;
        overflow: hidden;
      }
      
      .comic-info {
        padding-top: 5px;
      }
      
      .comic-title {
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 5px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        color: var(--text-semi-dark);
      }
      
      .chapter-overlay {
        position: absolute;
        top: 6px;
        left: 6px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        font-size: 0.6rem;
        font-weight: bold;
        padding: 3px 6px;
        border-radius: 3px;
        z-index: 2;
      }
      
      #loading {
        text-align: center;
        margin: 20px;
        color: var(--text-dark);
      }
      
      
      .comic-detail-hero {
        position: relative;
        height: 200px;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
        margin-bottom: 15px;
      }
      
      .comic-detail-cover {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        z-index: 1;
      }
      
      .comic-detail-hero-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 70%;
        background: linear-gradient(to top, var(--dark-main) 30%, transparent);
        z-index: 2;
      }
      
      .comic-detail-hero-content {
        position: relative;
        z-index: 3;
        padding: 15px;
        width: 100%;
      }
      
      .comic-detail-title {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 8px;
        color: var(--text-light);
        text-shadow: 0 1px 3px rgba(0,0,0,0.5);
      }
      
      .comic-detail-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        font-size: 0.85rem;
        color: var(--text-semi-dark);
        margin-bottom: 12px;
      }
      
      .comic-detail-meta span {
        display: flex;
        align-items: center;
        gap: 5px;
      }
      
      .comic-detail-meta i {
        font-size: 0.9rem;
        color: var(--primary);
      }
      
      .comic-detail-status-container {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      
      .comic-detail-status {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: bold;
        margin-right: 8px;
      }
      
      .comic-detail-status.ongoing {
        background-color: rgba(0, 200, 83, 0.2);
        color: #00C853;
        border: 1px solid #00C853;
      }
      
      .comic-detail-status.completed {
        background-color: rgba(33, 150, 243, 0.2);
        color: #2196F3;
        border: 1px solid #2196F3;
      }
      
      .comic-detail-rating {
        display: flex;
        align-items: center;
        gap: 3px;
        font-size: 0.85rem;
        color: #FFD700;
      }
      
      .comic-detail-body {
        padding: 0 ;
      }
      
      .comic-detail-actions {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  width: 100%;
  max-width: 100%; /* Tambahan penting */
  overflow: hidden; /* Untuk cegah elemen keluar */
}

.comic-action-btn {
  flex: 1;
  min-width: 0; /* Supaya bisa mengecil sesuai space */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px;
  border-radius: 8px;
  border: none;
  font-weight: 500;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap; /* Cegah teks turun baris */
  overflow: hidden;     /* Sembunyikan isi jika overflow */
}
      .comic-action-btn i {
        font-size: 1rem;
      }
      
      .action-btn {
        background: var(--card);
        color: var(--text-semi-dark);
        border: 2px solid var(--border-dark);
      }
      .bookmarked i {
  color: #FF8E42 !important; /* kuning emas */
}
      
      .share-btn:hover {
        background: var(--hover-dark);
      }
      
      .comic-detail-section {
        margin-bottom: 25px;
      }
      
      .section-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-semi-dark);
      }
      
      .section-title i {
        color: var(--primary);
      }
      
      .comic-detail-genres {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .comic-detail-genre {
        background-color: var(--card);
        color: var(--text-semi-dark);
        padding: 6px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        border: 1px solid var(--border-dark);
      }
      
      .comic-detail-description {
        font-size: 0.9rem;
        line-height: 1.6;
        color: var(--text-dark);
        margin-bottom: 10px;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      
      .read-more-btn {
        background: none;
        border: none;
        color: var(--primary);
        font-size: 0.85rem;
        font-weight: 500;
        padding: 0;
        cursor: pointer;
      }
      
      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      
      .chapter-sort {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 0.85rem;
        color: var(--text-dark);
        cursor: pointer;
      }
      
      .chapter-list-container {
        position: relative;
        max-height: 100%;
        overflow: hidden;
      }
      
      .chapter-list {
        overflow-y: auto;
        max-height: 51%;
        padding-right: 5px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        scroll-behavior: smooth;
      }
      
      .chapter-scroll-shadow {
        position: absolute;
        left: 0;
        width: 100%;
        height: 30px;
        pointer-events: none;
        z-index: 5;
        transition: opacity 0.3s;
      }
      
      .top-shadow {
        top: 0;
        background: linear-gradient(to bottom, var(--dark-main), transparent);
        opacity: 0;
      }
      
      .bottom-shadow {
        bottom: 0;
        background: linear-gradient(to top, var(--dark-main), transparent);
        opacity: 1;
      }
      
      .chapter-list::-webkit-scrollbar {
        width: 6px;
      }
      
      .chapter-list::-webkit-scrollbar-thumb {
        background-color: var(--border-dark);
        border-radius: 3px;
      }
      
      .chapter-list::-webkit-scrollbar-track {
        background: transparent;
      }
      
      .chapter-item {
        background-color: var(--card);
        border-radius: 8px;
        padding: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border: 1px solid var(--border-dark);
        transition: all 0.2s ease;
      }
      
      .chapter-item:hover {
        background-color: var(--hover-dark);
        transform: translateX(3px);
      }
      
      .chapter-info {
        flex: 1;
      }
      
      .chapter-title {
        font-weight: 500;
        font-size: 0.95rem;
        margin-bottom: 3px;
        color: var(--text-semi-dark);
      }
      
      .chapter-date {
        font-size: 0.8rem;
        color: var(--text-dark);
      }
      
      .chapter-read {
        background: var(--primary);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 6px;
        font-weight: 500;
        font-size: 0.85rem;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      
      .chapter-read:hover {
        opacity: 0.9;
        transform: scale(1.05);
      }
      
      .donation-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  z-index: 1000;
  display: none;
  justify-content: center;
  align-items: center;
}

.donation-content {
  background: var(--card);
  padding: 25px;
  border-radius: 3px;
  text-align: center;
  max-width: 300px;
  width: 90%;
  border: 1px solid var(--border-dark);
}

.donation-barcode {
  width: 100%;
  aspect-ratio: 1 / 1;
  display: flex;
  justify-content: center;
  align-items: center;
  background: white;
  border: 2px Solid white;
  overflow: hidden;
}
.donation-barcode canvas {
  max-width: 100%;
  height: auto;
}

.donation-text {
  color: var(--text-semi-dark);
  margin-top: 15px;
  font-size: 0.9rem;
}

.close-donation {
  position: absolute;
  top: 15px;
  right: 15px;
  background: none;
  border: none;
  color: var(--text-dark);
  font-size: 1.5rem;
  cursor: pointer;
}

.donation-title {
  color: var(--text-semi-dark);
  font-size: 1.2rem;
  margin-bottom: 10px;
  font-weight: 600;
}
      
      
      .comic-reader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--dark-main);
        z-index: 1000;
        display: none;
        flex-direction: column;
      }
      
      .comic-reader.active {
        display: flex;
      }
      
      
      .reader-header {
        padding: 12px 15px;
        background-color: rgba(18, 18, 18, 0.95);
        border-bottom: 1px solid var(--border-dark);
        display: flex;
        align-items: center;
        gap: 15px;
        z-index: 10;
        backdrop-filter: blur(5px);
      }
      
      .reader-back-btn {
        background: none;
        border: none;
        color: var(--text-semi-dark);
        font-size: 1.2rem;
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
        transition: all 0.2s ease;
      }
      
      .reader-back-btn:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      
      .reader-title {
        flex: 1;
        font-weight: 600;
        font-size: 1rem;
        color: var(--text-light);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      .reader-bookmark-btn {
        background: none;
        border: none;
        color: var(--text-semi-dark);
        font-size: 1.2rem;
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
        transition: all 0.2s ease;
      }
      
      .reader-bookmark-btn:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      
      .reader-bookmark-btn.bookmarked {
        color: var(--primary);
        font-weight: 900;
      }
      
      
      .reader-content {
        flex: 1;
        overflow: auto;
        scroll-behavior: smooth;
        position: relative;
      }
      .reader-content::-webkit-scrollbar {
        display: none; 
      }
      
      
      
      
      .reader-content.horizontal-mode {
        display: flex;
        flex-direction: row;
      }
      
      
      
      
      .comic-page {
        width: 100%;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--card);
        position: relative;
      }
      
      .reader-content.vertical-mode .comic-page {
        scroll-snap-align: start;
      }
      
      .reader-content.horizontal-mode .comic-page {
        min-width: 100vw;
        height: 100vh;
        scroll-snap-align: start;
      }
      
      .comic-page img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
      }
      
      
      .reader-footer {
        padding: 12px 15px;
        background-color: rgba(18, 18, 18, 0.98);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 10;
        backdrop-filter: blur(10px);
      }
      
      .footer-controls {
        display: flex;
        align-items: center;
        gap: 8px;
        max-width: 600px;
        margin: 0 auto;
      }
      
      .footer-btn {
        background: rgba(255, 255, 255, 0.08);
        color: var(--text-semi-dark);
        border: none;
        height: 44px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        padding: 0 12px;
      }
      
      .footer-btn:hover {
        background: rgba(255, 255, 255, 0.15);
        color: white;
      }
      
      .footer-btn:disabled {
        opacity: 0.4;
        pointer-events: none;
      }
      
      .footer-btn i {
        font-size: 1rem;
      }
      
      .btn-label {
        font-size: 0.8rem;
        margin: 0 5px;
        font-weight: 500;
      }
      
      .prev-chapter, .next-chapter {
        min-width: 80px;
      }
      
      .prev-chapter {
        padding-right: 15px;
      }
      
      .next-chapter {
        padding-left: 15px;
      }
      
      .menu-btn, .mode-btn {
        width: 44px;
        padding: 0;
      }
      
      
      .slider-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 5px;
        padding: 0 10px;
      }
      
      .slider-wrapper {
        position: relative;
        height: 4px;
      }
      
      .page-slider {
        position: relative;
        width: 100%;
        height: 4px;
        -webkit-appearance: none;
        appearance: none;
        background: transparent;
        z-index: 2;
        margin: 0;
      }
      
      .page-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: red;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 2px solid var(--dark);
      }
      
      .page-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        background: #FF8E42;
      }
      
      .slider-progress {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 0%;
        background: red;
        border-radius: 2px;
        pointer-events: none;
        z-index: 1;
      }
      
      .page-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 2px;
        font-size: 0.75rem;
        color: var(--text-semi-dark);
      }
      
      #current-page {
        color: var(--primary);
        font-weight: 600;
        min-width: 18px;
        text-align: right;
      }
      
      #total-pages {
        min-width: 18px;
        text-align: left;
      }
      
      
      @media (max-width: 480px) {
        .footer-controls {
          gap: 5px;
        }
        
        .prev-chapter, .next-chapter {
          min-width: auto;
          padding: 0 8px;
        }
        
        .btn-label {
          display: none;
        }
        
        .slider-container {
          padding: 0 5px;
        }
      }
      
      
      .page-slider-container {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .page-slider {
        flex: 1;
        height: 4px;
        -webkit-appearance: none;
        appearance: none;
        background: var(--dark-arsenic);
        border-radius: 2px;
        outline: none;
      }
      
      .page-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: var(--primary);
        cursor: pointer;
        transition: all 0.2s ease;
      }
      
      .page-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }
      
      .page-info {
        font-size: 0.85rem;
        color: var(--text-semi-dark);
        min-width: 50px;
        text-align: center;
      }
      
      
      .reader-panel {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0; 
        background: var(--dark);
        padding: 20px;
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;
        box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.5);
        z-index: 20;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
      
        transform: translateY(100%); 
        transition: transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); 
        will-change: transform;
      }
      
      .reader-panel.show {
        transform: translateY(0); 
      }
      
      .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-dark);
      }
      
      .panel-header h3 {
        font-size: 1.2rem;
        color: var(--text-semi-dark);
        font-weight: 600;
      }
      
      .close-panel {
        background: none;
        border: none;
        color: var(--text-dark);
        font-size: 1.2rem;
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
        transition: all 0.2s ease;
      }
      
      .close-panel:hover {
        background: rgba(255,255,255,0.1);
        color: var(--text-semi-dark);
      }
      
      .panel-content {
        flex: 1;
        overflow-y: auto;
      }
      
      
      .chapter-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      
      .chapter-item {
        padding: 12px;
        background: var(--card);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      
      .chapter-item:hover {
        background: var(--hover-dark);
      }
      
      .chapter-item.current {
        background: var(--primary);
        color: white;
      }
      
      
      .mode-option {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid var(--border-dark);
        background: var(--card);
        color: var(--text-semi-dark);
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      
      .mode-option:last-child {
        margin-bottom: 0;
      }
      
      .mode-option i {
        font-size: 1.2rem;
      }
      
      .mode-option.active {
        background: var(--primary);
        color: white;
        border-color: transparent;
      }
      
      
      @media (min-width: 768px) {
        .reader-header,
        .reader-footer {
          padding: 15px 25px;
        }
        
        .reader-panel {
          max-width: 450px;
          margin: 0 auto;
          border-radius: 12px;
        }
        
        .reader-controls {
          gap: 15px;
        }
      }
      
      
      .pagination-container {
        display: flex;
        justify-content: center;
        margin: 20px 0;
      }
      
      .pagination ul {
        display: flex;
        background-color: var(--card);
        padding: 5px;
        border-radius: 30px;
        box-shadow: 0px 5px 10px var(--shadow-dark);
        list-style: none;
        border: 1px solid var(--border-dark);
      }
      
      .pagination ul li {
        color: var(--text-dark);
        text-align: center;
        font-weight: 500;
        cursor: pointer;
        user-select: none;
        transition: all 0.3s ease;
        line-height: 30px;
        font-size: 12px;
      }
      
      .pagination ul li.numb {
        height: 30px;
        width: 30px;
        margin: 0 1px;
        border-radius: 50%;
      }
      
      .pagination ul li.btn {
        padding: 0 8px;
        border-radius: 30px;
      }
      
      .pagination ul li.dots {
        font-size: 14px;
        cursor: default;
        color: var(--text-dark);
        margin: 0 2px;
        width: 30px;
      }
      
      .pagination ul li.disabled {
        opacity: 0.5;
        cursor: default;
        pointer-events: none;
      }
      
      .pagination ul li.active,
      .pagination ul li.numb:hover:not(.disabled),
      .pagination ul li.btn:hover:not(.disabled) {
        background: var(--primary);
        color: #fff;
      }
      
      
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: var(--dark);
        display: flex;
        justify-content: space-around;
        padding: 10px 0;
        box-shadow: 0 -2px 10px var(--shadow-dark);
        z-index: 90;
        border-top: 1px solid var(--border-dark);
      }
      
      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: var(--text-dark);
        text-decoration: none;
        font-size: 0.7rem;
        
        padding: 5px 10px;
        border-radius: 8px;
      }
      
      .nav-item:hover {
        color: var(--text-semi-dark);
      }
      
      .nav-item i {
        font-size: 1.2rem;
        margin-bottom: 3px;
        
      }
      
      .nav-item.active {
        background: var(--primary);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        -webkit-text-fill-color: transparent; 
      }
      
      .nav-item.active i {
        background: var(--primary);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        -webkit-text-fill-color: transparent;
      }
      
      
      .settings-container {
        padding: 15px;
        margin-top: 3vh;
        padding-top: 0;
        color: var(--text-semi-dark);
      }
      
      .settings-section {
        margin-bottom: 25px;
      }
      
      .settings-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 15px;
        color: var(--text-semi-dark);
        padding-bottom: 5px;
        border-bottom: 1px solid var(--border-dark);
      }
      
      .settings-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid var(--border-dark);
        cursor: pointer;
        transition: background-color 0.2s ease;
      }
      
      .settings-item:hover {
        background-color: var(--hover-dark);
      }
      
      .settings-item:last-child {
        border-bottom: none;
      }
      
      .settings-item-label {
        display: flex;
        align-items: center;
      }
      
      .settings-item-icon {
        margin-right: 10px;
        color: var(--text-dark);
        width: 24px;
        text-align: center;
      }
      
      .settings-item-text {
        font-size: 16px;
        color: var(--text-semi-dark);
      }
      
      .settings-item-value {
        font-size: 14px;
        color: var(--text-dark);
      }
      
      
      .sub-view {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--dark-main);
        z-index: 1000;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
        padding: 20px;
        box-sizing: border-box;
      }
      
      .sub-view.active {
        transform: translateX(0);
      }
      .sub-view::-webkit-scrollbar {
        display: none; 
      }
      
      .sub-view-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-dark);
      }
      
      .sub-view-back {
        background: none;
        border: none;
        font-size: 20px;
        margin-right: 15px;
        cursor: pointer;
        color: var(--text-semi-dark);
        transition: color 0.2s ease;
      }
      
      .sub-view-back:hover {
        color: var(--text-light);
      }
      
      .sub-view-title {
        font-size: 20px;
        font-weight: bold;
        color: var(--text-semi-dark);
      }
      
      .sub-view-back svg path {
        stroke: var(--text-semi-dark);
      }
      
      .sub-view-content {
        color: var(--text-semi-dark);
      }
      
      
      .achievement-progress {
        background: var(--card);
        border-radius: 12px;
        padding: 18px;
        margin-bottom: 20px;
        box-shadow: 0 2px 12px var(--shadow-dark);
        border: 1px solid var(--border-dark);
      }
      
      .level-display {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }
      
      .level-icon {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .level-icon i {
        color: #FFD700;
        font-size: 1.4rem;
      }
      
      .level-icon span {
        font-weight: 600;
        font-size: 1.1rem;
        background: linear-gradient(to right, #FFD700, #FFA500);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      .progress-stats {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .progress-percent {
        background: var(--primary);
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: bold;
      }
      
      .progress-bar-container {
        margin: 8px 0 15px;
      }
      
      .progress-bar {
        height: 6px;
        background: var(--dark-arsenic);
        border-radius: 3px;
        overflow: hidden;
      }
      
      .progress-fill {
        height: 100%;
        background: linear-gradient(to right, #FF5E5B, #FF8E42);
        border-radius: 3px;
        transition: width 0.5s ease;
        position: relative;
      }
      
      .progress-fill::after {
        content: '';
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        width: 10px;
        background: linear-gradient(to right, rgba(255,94,91,0.8), transparent);
      }
      
      .xp-progress {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 0.9rem;
        justify-content: flex-end;
      }
      
      .current-xp {
        font-weight: 600;
        color: var(--primary);
      }
      
      .xp-divider {
        color: var(--text-dark);
      }
      
      .target-xp {
        color: var(--text-dark);
      }
      
      .badge-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }
      
      .badge-card {
        background: var(--card);
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 2px 8px var(--shadow-dark);
        border: 1px solid var(--border-dark);
        transition: transform 0.2s ease;
      }
      
      .badge-card:hover {
        transform: translateY(-3px);
      }
      
      .badge-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        margin: 0 auto 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }
      
      .badge-icon.gold {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        color: #8B6508;
      }
      
      .badge-icon.silver {
        background: linear-gradient(135deg, #C0C0C0 0%, #A9A9A9 100%);
        color: #696969;
      }
      
      .badge-icon.bronze {
        background: linear-gradient(135deg, #CD7F32 0%, #A0522D 100%);
        color: #5D2906;
      }
      
      .badge-icon.locked {
        background: var(--dark-arsenic);
        color: var(--text-dark);
      }
      
      .badge-card h4 {
        margin: 0 0 5px;
        font-size: 0.95rem;
        color: var(--text-semi-dark);
      }
      
      .badge-card p {
        margin: 0 0 8px;
        font-size: 0.8rem;
        color: var(--text-dark);
      }
      
      .badge-date {
        font-size: 0.7rem;
        color: var(--primary);
        font-weight: bold;
      }
      
      .badge-progress {
        font-size: 0.75rem;
        color: var(--text-dark);
      }
      
      .badge-card.locked {
        opacity: 0.6;
      }
      
      .badge-card.locked h4 {
        color: var(--text-dark);
      }
      
      
      .notification-category {
        margin-bottom: 24px;
      }
      
      .notification-category h3 {
        font-size: 16px;
        color: var(--text-dark);
        margin-bottom: 16px;
        padding-left: 8px;
      }
      
      .notification-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        background: var(--card);
        border-radius: 8px;
        margin-bottom: 12px;
        box-shadow: 0 2px 8px var(--shadow-dark);
        border: 1px solid var(--border-dark);
      }
      
      .notification-info {
        display: grid;
        grid-template-columns: 40px 1fr;
        gap: 16px;
        align-items: center;
        width: 100%;
      }
      
      .notification-icon {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--text-semi-dark);
      }
      
      .notification-icon.bg-blue {
        background: var(--dark);
        color: var(--primary);
      }
      
      .notification-text h4 {
        font-size: 16px;
        color: var(--text-semi-dark);
        margin-bottom: 4px;
      }
      
      .notification-text p {
        font-size: 13px;
        color: var(--text-dark);
      }
      
      .switch-notification {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }
      
      .switch-notification input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      
      .slider-notification {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--border-dark);
        transition: .4s;
        border-radius: 24px;
      }
      
      .slider-notification:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 4.5px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
      }
      
      input:checked + .slider-notification {
        background: var(--primary);
      }
      
      input:checked + .slider-notification:before {
        transform: translateX(16px);
      }
      
      
      .language-list {
        padding: 0;
        margin: 0;
      }
        
      .language-item {
        display: flex;
        align-items: center;
        padding: 16px;
        border-bottom: 1px solid var(--border-dark);
        cursor: pointer;
        transition: background 0.2s;
        position: relative;
      }
      
      .language-item:hover {
        background: var(--hover-dark);
      }
        
      .language-item input[type="radio"] {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
      }
      
      .language-flag {
        font-size: 1.8rem;
        margin-right: 16px;
        min-width: 32px;
      }
      
      .language-info {
        flex: 1;
      }
      
      .language-info h3 {
        margin: 0;
        font-size: 1rem;
        color: var(--text-semi-dark);
      }
        
      .language-info p {
        margin: 4px 0 0;
        font-size: 0.85rem;
        color: var(--text-dark);
      }
      
      .checkbox-wrapper {
        margin-left: 12px;
      }
      
      .custom-checkbox {
        width: 20px;
        height: 20px;
        border: 2px solid var(--border-dark);
        border-radius: 50%;
        position: relative;
        transition: all 0.2s;
      }
      
      .language-item input:checked ~ .checkbox-wrapper .custom-checkbox {
        border-color: var(--primary);
        background: var(--primary);
      }
      
      .language-item input:checked ~ .checkbox-wrapper .custom-checkbox::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 10px;
        height: 10px;
        background: white;
        border-radius: 50%;
      }
      
      
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      
      ::-webkit-scrollbar-track {
        background: var(--dark-main);
      }
      
      ::-webkit-scrollbar-thumb {
        background: var(--dark-arsenic);
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb:hover {
        background: var(--text-dark);
      }
      
      
      @media (min-width: 768px) {
        .pagination ul {
          padding: 8px;
          border-radius: 50px;
        }
        .pagination ul li {
          line-height: 35px;
          font-size: 14px;
        }
        .pagination ul li.numb {
          height: 35px;
          width: 35px;
          margin: 0 2px;
        }
        .pagination ul li.btn {
          padding: 0 12px;
        }
        .pagination ul li.dots {
          font-size: 18px;
          margin: 0 4px;
          width: 35px;
        }
      
        .comic-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      
        .badge-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }
      
      @media (min-width: 992px) {
        .comic-grid {
          grid-template-columns: repeat(5, 1fr);
        }
      }
    </style>
  </head>

  <body>

    <header id="main-header">
      <div class="logo-container">
        <div class="user-profile">
          <div class="user-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="user-info">
            <div class="welcome-text">Selamat datang</div>
            <div class="username">John Doe</div>
          </div>
        </div>

        <input type="checkbox" id="themeToggle" class="toggle-theme" />
        <label for="themeToggle" class="toggle-label">
          <i class="fas fa-moon"></i>
          <i class="fas fa-sun"></i>
        </label>

        <button class="user-btn-bell">
          <i class="fas fa-bell"></i>
          <span class="badge">3</span>
        </button>
      </div>

      <div class="search-profile-row">
        <div class="search-bar">
          <input type="text" placeholder="Cari komik, genre, atau author..." />
        </div>
      </div>
    </header>


    <main>

      <div id="home-view" class="content-view active">

        <div class="recommendation-section">
          <div class="recommendation-title">Rekomendasi untukmu</div>
          <div class="recommendation-scroll" id="recommendation-container"></div>
          <div class="recommendation-indicator" id="recommendation-indicator"></div>
        </div>


        <div class="genre-section">
          <div class="genre-header">
            <div class="genre-title">Genre</div>
            <button class="genre-toggle" id="genre-toggle">
              <i class="fas fa-filter"></i>
              Filter
            </button>
          </div>

          <div class="selected-genres" id="selected-genres">
            <div class="no-genres-selected">Semua genre akan ditampilkan</div>
          </div>
        </div>


        <div id="comic-container" class="comic-grid"></div>
        <div id="loading">Memuat...</div>


        <div class="pagination-container">
          <div class="pagination">
            <ul id="pagination-ul"></ul>
          </div>
        </div>
      </div>


      <div id="comic-detail-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Detail Komik</div>
        </div>
        <div class="sub-view-content">
          <div class="comic-detail-hero">
            <div class="comic-detail-cover" id="detail-comic-cover"></div>
            <div class="comic-detail-hero-overlay"></div>
            <div class="comic-detail-hero-content">
              <h1 class="comic-detail-title" id="detail-comic-title">Judul Komik</h1>
              <div class="comic-detail-meta">
                <span class="comic-detail-author" id="detail-comic-author"><i class="fas fa-user-edit"></i>
                  Author</span>
                <span class="comic-detail-illustrator" id="detail-comic-illustrator"><i class="fas fa-paint-brush"></i>
                  Illustrator</span>
              </div>
              <div class="comic-detail-status-container">
                <span class="comic-detail-status" id="detail-comic-status">Ongoing</span>
                <span class="comic-detail-rating"><i class="fas fa-star"></i> 4.8</span>
              </div>
            </div>
          </div>

          <div class="comic-detail-body">
            <div class="comic-detail-actions">
  <button class="comic-action-btn action-btn" title="Bookmark">
    <i class="fas fa-bookmark"></i>
  </button>
  <button class="comic-action-btn action-btn" title="Komentar">
    <i class="fas fa-comment-dots"></i>
  </button>
  <button class="comic-action-btn action-btn" title="Bagikan">
    <i class="fas fa-share-alt"></i>
  </button>
  <button class="comic-action-btn action-btn" title="Donasi">
    <i class="fas fa-hand-holding-heart"></i>
  </button>
</div>

            <div class="comic-detail-section">
              <h3 class="section-title"><i class="fas fa-tags"></i> Genre</h3>
              <div class="comic-detail-genres" id="detail-comic-genres">

              </div>
            </div>

            <div class="comic-detail-section">
              <h3 class="section-title"><i class="fas fa-align-left"></i> Sinopsis</h3>
              <div class="comic-detail-description" id="detail-comic-description">
                Deskripsi komik akan ditampilkan di sini. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
              </div>
              <button class="read-more-btn">Read More</button>
            </div>

            <div class="comic-detail-section">
              <div class="section-header">
                <h3 class="section-title"><i class="fas fa-list-ol"></i> Daftar Chapter</h3>
                <div class="chapter-sort">
                  <span>Terbaru</span>
                  <i class="fas fa-chevron-down"></i>
                </div>
              </div>
              <div class="chapter-list-container">
                <div class="chapter-scroll-shadow top-shadow"></div>
                <div class="chapter-list" id="chapter-list">

                </div>
                <div class="chapter-scroll-shadow bottom-shadow"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="donation-modal" id="donation-modal">
  <div class="donation-content">
    <button class="close-donation" id="close-donation">&times;</button>
    <div class="donation-title">Dukung Kreator</div>
    <div id="qrcode" class="donation-barcode"></div>
    <div class="donation-text">
      Traktir kami kopi untuk semangat lebih!
      <br>
      Scan barcode di atas untuk donasi
    </div>
  </div>
</div>


      <div id="comic-reader-view" class="comic-reader">

        <div class="reader-header">
          <button class="reader-back-btn" id="reader-back-btn">
            <i class="fas fa-arrow-left"></i>
          </button>
          <div class="reader-title" id="reader-comic-title">Komik Title</div>
          <button class="reader-bookmark-btn" id="reader-bookmark-btn">
            <i class="far fa-bookmark"></i>
          </button>
        </div>


        <div class="reader-content" id="comic-reader-content">

        </div>


        <div class="reader-footer">
          <div class="footer-controls">

            <button class="footer-btn prev-chapter" id="reader-prev-chapter" title="Previous Chapter">
              <i class="fas fa-backward"></i>
              <span class="btn-label">Prev</span>
            </button>


            <div class="slider-container">
              <div class="slider-wrapper">
                <input type="range" class="page-slider" id="page-slider" min="1" value="1" step="1">
                <div class="slider-progress"></div>
              </div>
              <div class="page-indicator">
                <span id="current-page">1</span>
                <span>/</span>
                <span id="total-pages">24</span>
              </div>
            </div>


            <button class="footer-btn next-chapter" id="reader-next-chapter" title="Next Chapter">
              <span class="btn-label">Next</span>
              <i class="fas fa-forward"></i>
            </button>


            <button class="footer-btn menu-btn" id="chapter-menu-btn" title="Chapter List">
              <i class="fas fa-list-ul"></i>
            </button>


            <button class="footer-btn mode-btn" id="reading-mode-btn" title="Reading Mode">
              <i class="fas fa-book-open"></i>
            </button>
          </div>
        </div>


        <div class="reader-panel chapter-list-panel" id="chapter-list-panel">
          <div class="panel-header">
            <h3>Daftar Chapter</h3>
            <button class="close-panel" id="close-chapter-panel">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="panel-content" id="chapter-panel-content">

          </div>
        </div>


        <div class="reader-panel reading-mode-panel" id="reading-mode-panel">
          <div class="panel-header">
            <h3>Mode Baca</h3>
            <button class="close-panel" id="close-mode-panel">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="panel-content">
            <button class="mode-option active" data-mode="vertical">
              <i class="fas fa-align-justify"></i>
              <span>Vertical</span>
            </button>
            <button class="mode-option" data-mode="horizontal">
              <i class="fas fa-book-open"></i>
              <span>Horizontal</span>
            </button>
            <button class="mode-option" data-mode="webtoon">
              <i class="fas fa-scroll"></i>
              <span>Webtoon</span>
            </button>
          </div>
        </div>
      </div>


      <div id="explore-view" class="content-view">
        <h2 style="text-align: center; margin-top: 50px;">Halaman Jelajah</h2>
        <p style="text-align: center;">Konten untuk halaman jelajah akan ditampilkan di sini</p>
      </div>


      <div id="collection-view" class="content-view">
        <h2 style="text-align: center; margin-top: 50px;">Halaman Koleksi</h2>
        <p style="text-align: center;">Konten untuk halaman koleksi akan ditampilkan di sini</p>
      </div>


      <div id="settings-view" class="content-view">
        <div class="settings-container">
          <div class="settings-section">
            <div class="settings-title">Akun</div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-user"></i></div>
                <div class="settings-item-text">Profil Saya</div>
              </div>
              <div class="settings-item-value"><i class="fas fa-chevron-right"></i></div>
            </div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-bell"></i></div>
                <div class="settings-item-text">Notifikasi</div>
              </div>
              <div class="settings-item-value"><i class="fas fa-chevron-right"></i></div>
            </div>

          </div>

          <div class="settings-section">
            <div class="settings-title">Aplikasi</div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-language"></i></div>
                <div class="settings-item-text">Bahasa</div>
              </div>
              <div class="settings-item-value">Indonesia <i class="fas fa-chevron-right"></i></div>
            </div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-flask"></i></div>
                <div class="settings-item-text">Lab</div>
              </div>
              <div class="settings-item-value">Beta <i class="fas fa-chevron-right"></i></div>
            </div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-trophy"></i></div>
                <div class="settings-item-text">Pencapaian</div>
              </div>
              <div class="settings-item-value"><i class="fas fa-chevron-right"></i></div>
            </div>
          </div>

          <div class="settings-section">
            <div class="settings-title">Tentang</div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-info-circle"></i></div>
                <div class="settings-item-text">Versi Aplikasi</div>
              </div>
              <div class="settings-item-value">1.0.0</div>
            </div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-shield-alt"></i></div>
                <div class="settings-item-text">Kebijakan Privasi</div>
              </div>
              <div class="settings-item-value"><i class="fas fa-chevron-right"></i></div>
            </div>
            <div class="settings-item">
              <div class="settings-item-label">
                <div class="settings-item-icon"><i class="fas fa-file-alt"></i></div>
                <div class="settings-item-text">Syarat & Ketentuan</div>
              </div>
              <div class="settings-item-value"><i class="fas fa-chevron-right"></i></div>
            </div>
          </div>

        </div>
      </div>


      <div id="profile-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Profil Saya</div>
        </div>
        <div class="sub-view-content">
          <p>Ini adalah halaman profil pengguna. Di sini Anda dapat mengubah informasi profil Anda.</p>
        </div>
      </div>


      <div id="notifications-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15 18L9 12L15 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
          <div class="sub-view-title">Notifikasi</div>
        </div>

        <div class="sub-view-content">
          <div class="notification-category">
            <h3>Preferensi Notifikasi</h3>
            <div class="notification-item">
              <div class="notification-info">
                <div class="notification-icon">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M9.14939 7.83131C8.57654 5.92179 10.0064 4 12 4C13.9936 4 15.4235 5.92179 14.8506 7.8313L13.2873 13.0422C13.2171 13.2762 13.182 13.3932 13.128 13.4895C12.989 13.7371 12.7513 13.9139 12.4743 13.9759C12.3664 14 12.2443 14 12 14C11.7557 14 11.6336 14 11.5257 13.9759C11.2487 13.9139 11.011 13.7371 10.872 13.4895C10.818 13.3932 10.7829 13.2762 10.7127 13.0422L9.14939 7.83131Z"
                      fill="#2A4157" fill-opacity="0.24" stroke="#222222" stroke-width="1.2" />
                    <circle cx="12" cy="19" r="2" fill="#2A4157" fill-opacity="0.24" stroke="#222222"
                      stroke-width="1.2" />
                  </svg>
                </div>
                <div class="notification-text">
                  <h4>Notifikasi Aplikasi</h4>
                  <p>Perbarui komik favorit, rekomendasi, dan informasi penting</p>
                </div>
              </div>
              <label class="switch-notification">
                <input type="checkbox" checked>
                <span class="slider-notification"></span>
              </label>
            </div>

            <div class="notification-item">
              <div class="notification-info">
                <div class="notification-icon">
                  <svg width="35px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M4 9C4 6.17157 4 4.75736 4.87868 3.87868C5.75736 3 7.17157 3 10 3H14C16.8284 3 18.2426 3 19.1213 3.87868C20 4.75736 20 6.17157 20 9V15.8276C20 18.5109 20 19.8525 19.1557 20.2629C18.3114 20.6733 17.2565 19.8444 15.1465 18.1866L14.4713 17.656C13.2849 16.7239 12.6917 16.2578 12 16.2578C11.3083 16.2578 10.7151 16.7239 9.52871 17.656L8.85346 18.1866C6.74355 19.8444 5.68859 20.6733 4.84429 20.2629C4 19.8525 4 18.5109 4 15.8276V9Z"
                      fill="#2A4157" fill-opacity="0.24" stroke="#222222" stroke-width="1.4" />
                  </svg>
                </div>
                <div class="notification-text">
                  <h4>Notifikasi Chapter Baru</h4>
                  <p>Chapter baru dari komik yang Anda ikuti</p>
                </div>
              </div>
              <label class="switch-notification">
                <input type="checkbox" checked>
                <span class="slider-notification"></span>
              </label>
            </div>
          </div>

          <div class="notification-category">
            <h3>Tipe Notifikasi</h3>
            <div class="notification-item">
              <div class="notification-info">
                <div class="notification-icon">
                  <svg width="35px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 3L7 8H5C3.89543 8 3 8.89543 3 10V14C3 15.1046 3.89543 16 5 16H7L13 21V3Z"
                      fill="#2A4157" fill-opacity="0.15" />
                    <path
                      d="M16 8.99998C16.5 9.49999 17 10.5 17 12C17 13.5 16.5 14.5 16 15M19 6C20.5 7.5 21 10 21 12C21 14 20.5 16.5 19 18M13 3L7 8H5C3.89543 8 3 8.89543 3 10V14C3 15.1046 3.89543 16 5 16H7L13 21V3Z"
                      stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  </svg>
                </div>
                <div class="notification-text">
                  <h4>Notifikasi Suara</h4>
                  <p>Bunyikan suara saat notifikasi masuk</p>
                </div>
              </div>
              <label class="switch-notification">
                <input type="checkbox">
                <span class="slider-notification"></span>
              </label>
            </div>

            <div class="notification-item">
              <div class="notification-info">
                <div class="notification-icon">
                  <svg width="35px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="bi bi-phone-vibrate">
                    <rect x="5" y="3" width="6" height="10" fill="#2A4157" fill-opacity="0.15" />
                    <path fill="#000000"
                      d="M10 3a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h4zM6 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H6z" />
                    <path fill="#000000"
                      d="M8 12a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM1.599 4.058a.5.5 0 0 1 .208.676A6.967 6.967 0 0 0 1 8c0 1.18.292 2.292.807 3.266a.5.5 0 0 1-.884.468A7.968 7.968 0 0 1 0 8c0-1.347.334-2.619.923-3.734a.5.5 0 0 1 .676-.208zm12.802 0a.5.5 0 0 1 .676.208A7.967 7.967 0 0 1 16 8a7.967 7.967 0 0 1-.923 3.734a.5.5 0 0 1-.884-.468A6.967 6.967 0 0 0 15 8c0-1.18-.292-2.292-.807-3.266a.5.5 0 0 1 .208-.676zM3.057 5.534a.5.5 0 0 1 .284.648A4.986 4.986 0 0 0 3 8c0 .642.12 1.255.34 1.818a.5.5 0 1 1-.93.364A5.986 5.986 0 0 1 2 8c0-.769.145-1.505.41-2.182a.5.5 0 0 1 .647-.284zm9.886 0a.5.5 0 0 1 .648.284C13.855 6.495 14 7.231 14 8c0 .769-.145 1.505-.41 2.182a.5.5 0 0 1-.93-.364C12.88 9.255 13 8.642 13 8c0-.642-.12-1.255-.34-1.818a.5.5 0 0 1 .283-.648z" />
                  </svg>
                </div>
                <div class="notification-text">
                  <h4>Getar</h4>
                  <p>Getarkan perangkat saat notifikasi masuk</p>
                </div>
              </div>
              <label class="switch-notification">
                <input type="checkbox">
                <span class="slider-notification"></span>
              </label>
            </div>
          </div>
        </div>
      </div>


      <div id="language-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Bahasa</div>
        </div>
        <div class="sub-view-content">
          <div class="language-list" id="language-list">

            <label class="language-item active">
              <input type="radio" name="language" value="id" checked>
              <span class="fi fi-id fis language-flag"></span>
              <div class="language-info">
                <h3>Bahasa Indonesia</h3>
                <p>Default</p>
              </div>
              <div class="checkbox-wrapper">
                <div class="custom-checkbox checked"></div>
              </div>
            </label>


            <label class="language-item">
              <input type="radio" name="language" value="en">
              <span class="fi fi-gb fis language-flag"></span>
              <div class="language-info">
                <h3>English</h3>
                <p>English (US)</p>
              </div>
              <div class="checkbox-wrapper">
                <div class="custom-checkbox"></div>
              </div>
            </label>
          </div>
        </div>
      </div>

      <div id="beta-lab-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Beta Lab</div>
        </div>
        <div class="sub-view-content">
          <p>Fitur fitur beta dan pra rilis akan tersedia di sini.</p>
        </div>
      </div>

      <div id="achievements-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Pencapaian</div>
        </div>
        <div class="sub-view-content">

          <div class="achievement-progress">
            <div class="level-display">
              <div class="level-icon">
                <i class="fas fa-trophy"></i>
                <span>Level 5</span>
              </div>
              <div class="progress-stats">
                <div class="progress-percent">65%</div>
              </div>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar">
                <div class="progress-fill" style="width: 65%"></div>
              </div>
            </div>
            <div class="xp-progress">
              <span class="current-xp">1,250 XP</span>
              <span class="xp-divider">/</span>
              <span class="target-xp">2,000 XP</span>
            </div>
          </div>

          <div class="badge-grid">
            <div class="badge-card unlocked" data-category="reading">
              <div class="badge-icon gold"><i class="fas fa-book-open"></i></div>
              <h4>Pembaca Baru</h4>
              <p>Baca 10 chapter</p>
              <div class="badge-date">Diperoleh: 12 Jun 2023</div>
            </div>

            <div class="badge-card unlocked" data-category="collection">
              <div class="badge-icon silver"><i class="fas fa-bookmark"></i></div>
              <h4>Kolektor</h4>
              <p>Simpan 5 komik</p>
              <div class="badge-date">Diperoleh: 5 Jun 2023</div>
            </div>

            <div class="badge-card locked" data-category="reading">
              <div class="badge-icon locked"><i class="fas fa-lock"></i></div>
              <h4>Maratoner</h4>
              <p>Baca 50 chapter</p>
              <div class="badge-progress">25/50</div>
            </div>

            <div class="badge-card locked" data-category="social">
              <div class="badge-icon locked"><i class="fas fa-share-alt"></i></div>
              <h4>Pembagi</h4>
              <p>Bagikan 10 komik</p>
              <div class="badge-progress">3/10</div>
            </div>

            <div class="badge-card unlocked" data-category="reading">
              <div class="badge-icon bronze"><i class="fas fa-clock"></i></div>
              <h4>Pekersama</h4>
              <p>Baca 7 hari berturut-turut</p>
              <div class="badge-date">Diperoleh: 8 Jun 2023</div>
            </div>

            <div class="badge-card locked" data-category="collection">
              <div class="badge-icon locked"><i class="fas fa-star"></i></div>
              <h4>Penggemar Berat</h4>
              <p>Beri rating 20 komik</p>
              <div class="badge-progress">12/20</div>
            </div>
          </div>
        </div>
      </div>

      <div id="privacy-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Kebijakan Privasi</div>
        </div>
        <div class="sub-view-content">
          <p>Kebijakan privasi aplikasi A-Komik.</p>
        </div>
      </div>

      <div id="terms-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Syarat & Ketentuan</div>
        </div>
        <div class="sub-view-content">
          <p>Syarat dan ketentuan penggunaan aplikasi A-Komik.</p>
        </div>
      </div>

      <div id="version-view" class="sub-view">
        <div class="sub-view-header">
          <button class="sub-view-back"><i class="fas fa-arrow-left"></i></button>
          <div class="sub-view-title">Versi Aplikasi</div>
        </div>
        <div class="sub-view-content">
          <p>Informasi versi aplikasi A-Komik.</p>
          <p>Versi saat ini: 1.0.0</p>
          <p>Terakhir diperbarui: 1 Januari 2023</p>
        </div>
      </div>
    </main>


    <div class="genre-popup" id="genre-popup">
      <div class="genre-popup-content">
        <div class="genre-popup-header">
          <div class="genre-popup-title">Pilih Genre</div>
          <button class="close-popup" id="close-popup">&times;</button>
        </div>
        <div class="genre-popup-grid" id="genre-popup-grid">

        </div>
      </div>
    </div>


    <nav class="bottom-nav">
      <a href="#" class="nav-item active" data-view="home-view">
        <i class="fas fa-home"></i>
        <span>Beranda</span>
      </a>
      <a href="#" class="nav-item" data-view="explore-view">
        <i class="fas fa-compass"></i>
        <span>Jelajah</span>
      </a>
      <a href="#" class="nav-item" data-view="collection-view">
        <i class="fas fa-bookmark"></i>
        <span>Koleksi</span>
      </a>
      <a href="#" class="nav-item" data-view="settings-view">
        <i class="fas fa-cog"></i>
        <span>Pengaturan</span>
      </a>
    </nav>


    <script defer>
      document.addEventListener('DOMContentLoaded', function() {

        const navItems = document.querySelectorAll('.nav-item');
        const contentViews = document.querySelectorAll('.content-view');
        const comicContainer = document.getElementById("comic-container");
        const recommendationContainer = document.getElementById("recommendation-container");
        const loading = document.getElementById("loading");
        const genreToggle = document.getElementById("genre-toggle");
        const genrePopup = document.getElementById("genre-popup");
        const closePopup = document.getElementById("close-popup");
        const genrePopupGrid = document.getElementById("genre-popup-grid");
        const selectedGenresContainer = document.getElementById("selected-genres");
        const paginationUl = document.getElementById("pagination-ul");
        const settingsItems = document.querySelectorAll('.settings-item');
        const subViews = document.querySelectorAll('.sub-view');
        const chapterList = document.getElementById('chapter-list');
        const topShadow = document.querySelector('.top-shadow');
        const bottomShadow = document.querySelector('.bottom-shadow');

        let isLoading = false;
        let comicCounter = 1;
        let selectedGenres = [];
        let currentPage = 1;
        const totalPages = 20;

        const genres = [
          'Aksi', 'Petualangan', 'Komedi', 'Drama', 'Fantasi',
          'Horor', 'Romantis', 'Sci-Fi', 'Slice of Life', 'Misteri',
          'Superhero', 'Sejarah', 'Olahraga', 'Musikal', 'Thriller',
          'Psikologis', 'Militer', 'Isekai', 'Shounen', 'Shoujo',
          'Josei', 'Seinen', 'Mecha', 'School Life'
        ];

        navItems.forEach(item => {
          item.addEventListener('click', async function(e) {
            e.preventDefault();

            if (this.classList.contains('active')) return;

            const viewId = this.getAttribute('data-view');
            const currentActiveView = document.querySelector('.content-view.active');
            const newView = document.getElementById(viewId);

            const header = document.querySelector('header');
            const body = document.body;

            if (viewId === 'settings-view') {
              header.classList.add('hidden');
              body.classList.add('header-hidden');
            } else {
              header.classList.remove('hidden');
              body.classList.remove('header-hidden');
            }

            if (currentActiveView) {
              currentActiveView.classList.remove('active');
              await new Promise(resolve => setTimeout(resolve, 50));
            }

            navItems.forEach(nav => nav.classList.remove('active'));
            this.classList.add('active');

            newView.classList.add('active');

            if (viewId === 'home-view') {
              newView.style.opacity = '0';
              await new Promise(resolve => setTimeout(resolve, 100));
              newView.style.opacity = '1';
            }
          });
        });

        function initGenrePopup() {
          genrePopupGrid.innerHTML = '';

          genres.forEach(genre => {
            const button = document.createElement('button');
            button.className = 'genre-popup-button';
            button.textContent = genre;

            if (selectedGenres.includes(genre)) {
              button.classList.add('active');
            }

            button.addEventListener('click', () => {
              toggleGenre(genre);
              button.classList.toggle('active');
            });

            genrePopupGrid.appendChild(button);
          });
        }

        function toggleGenre(genre) {
          const index = selectedGenres.indexOf(genre);

          if (index > -1) {
            selectedGenres.splice(index, 1);
          } else {
            selectedGenres.push(genre);
          }

          updateSelectedGenresDisplay();
        }

        function updateSelectedGenresDisplay() {
          selectedGenresContainer.innerHTML = '';

          if (selectedGenres.length === 0) {
            const message = document.createElement('div');
            message.className = 'no-genres-selected';
            message.textContent = 'Semua genre akan ditampilkan';
            selectedGenresContainer.appendChild(message);
          } else {
            selectedGenres.forEach(genre => {
              const chip = document.createElement('div');
              chip.className = 'selected-genre';
              chip.innerHTML = `
          ${genre}
          <button class="remove-genre" data-genre="${genre}">&times;</button>
        `;

              selectedGenresContainer.appendChild(chip);
            });

            document.querySelectorAll('.remove-genre').forEach(button => {
              button.addEventListener('click', (e) => {
                const genreToRemove = e.target.getAttribute('data-genre');
                toggleGenre(genreToRemove);

                const popupButtons = genrePopupGrid.querySelectorAll('.genre-popup-button');
                popupButtons.forEach(btn => {
                  if (btn.textContent === genreToRemove) {
                    btn.classList.remove('active');
                  }
                });
              });
            });
          }
        }

        genreToggle.addEventListener('click', () => {
          genrePopup.style.display = 'flex';
          document.body.style.overflow = 'hidden';
        });

        closePopup.addEventListener('click', () => {
          genrePopup.style.display = 'none';
          document.body.style.overflow = 'auto';
        });

        genrePopup.addEventListener('click', (e) => {
          if (e.target === genrePopup) {
            genrePopup.style.display = 'none';
            document.body.style.overflow = 'auto';
          }
        });

        function generateRecommendations() {
          const recommendationContainer = document.getElementById("recommendation-container");
          const indicatorContainer = document.getElementById("recommendation-indicator");

          recommendationContainer.innerHTML = '';
          indicatorContainer.innerHTML = '';

          for (let i = 1; i <= 10; i++) {
            const title = `Rekomendasi ${i}`;
            const chapter = `Chapter ${Math.floor(Math.random() * 80) + 1}`;

            const card = document.createElement("div");
            card.className = "recommendation-card";
            card.innerHTML = `
        <div class="chapter-overlay">${chapter.replace('Chapter ', '')}</div>
        <div class="comic-info">
          <h3 class="comic-title">${title}</h3>
        </div>
      `;

            card.addEventListener('click', function() {
              const comicData = {
                title: title,
                author: `Author ${Math.floor(Math.random() * 10) + 1}`,
                illustrator: `Illustrator ${Math.floor(Math.random() * 10) + 1}`,
                status: Math.random() > 0.7 ? 'Completed' : 'Ongoing',
                genres: getRandomGenres(),
                chapters: Math.floor(Math.random() * 50) + 10,
                description: `Ini adalah deskripsi untuk ${title}. Komik rekomendasi ini menawarkan cerita yang menarik dan penuh dengan kejutan.`
              };
              showComicDetail(comicData);
            });

            recommendationContainer.appendChild(card);

            const dot = document.createElement("div");
            dot.className = "recommendation-dot";
            if (i === 1) dot.classList.add("active");
            dot.addEventListener('click', () => {
              recommendationContainer.scrollTo({
                left: (i - 1) * recommendationContainer.offsetWidth,
                behavior: 'smooth'
              });
              updateActiveDot(i);
            });
            indicatorContainer.appendChild(dot);
          }
        }

        function updateActiveDot(activeIndex) {
          const dots = document.querySelectorAll('.recommendation-dot');
          dots.forEach((dot, index) => {
            if (index === activeIndex - 1) {
              dot.classList.add('active');
            } else {
              dot.classList.remove('active');
            }
          });
        }

        document.getElementById("recommendation-container").addEventListener('scroll', function() {
          const container = this;
          const scrollPosition = container.scrollLeft;
          const cardWidth = container.offsetWidth;
          const activeIndex = Math.round(scrollPosition / cardWidth) + 1;
          updateActiveDot(activeIndex);
        });

        async function fetchRandomComics(page = 1) {
          isLoading = true;
          loading.style.display = "block";
          comicContainer.innerHTML = "";

          comicCounter = (page - 1) * 9 + 1;

          for (let i = 0; i < 15; i++) {
            const title = `Komik ${comicCounter++}`;
            const chapter = `Chapter ${Math.floor(Math.random() * 80) + 1}`;

            const card = document.createElement("div");
            card.className = "comic-card";

            card.innerHTML = `
        <div class="comic-cover-wrapper" style="position: relative;">
          <div class="chapter-overlay">${chapter.replace('Chapter ', '')}</div>
          <div class="comic-cover"></div>
        </div>
        <div class="comic-info">
          <h3 class="comic-title">${title}</h3>
        </div>
      `;

            card.addEventListener('click', function() {
              const comicData = {
                title: title,
                author: `Author ${Math.floor(Math.random() * 10) + 1}`,
                illustrator: `Illustrator ${Math.floor(Math.random() * 10) + 1}`,
                status: Math.random() > 0.7 ? 'Completed' : 'Ongoing',
                genres: getRandomGenres(),
                chapters: Math.floor(Math.random() * 50) + 10,
                description: `Ini adalah deskripsi untuk ${title}. Komik ini menceritakan tentang petualangan yang menarik dan penuh dengan aksi. Dibuat oleh Author ${Math.floor(Math.random() * 10) + 1} dengan ilustrasi yang memukau.`
              };
              showComicDetail(comicData);
            });

            comicContainer.appendChild(card);
          }

          isLoading = false;
          loading.style.display = "none";

          createPagination(totalPages, page);
        }

        function createPagination(totalPages, currentPage) {
          let liTag = '';
          liTag += `<li class="btn prev ${currentPage === 1 ? 'disabled' : ''}" 
                ${currentPage === 1 ? '' : `onclick="changePage(${currentPage - 1})"`}>
                <span><i class="fas fa-angle-left"></i></span>
              </li>`;
          liTag += `<li class="numb ${currentPage === 1 ? 'active' : ''}" onclick="changePage(1)">
                <span>1</span>
              </li>`;
          if (currentPage <= 4) {
            for (let i = 2; i <= Math.min(5, totalPages - 1); i++) {
              liTag += `<li class="numb ${currentPage === i ? 'active' : ''}" onclick="changePage(${i})">
                    <span>${i}</span>
                  </li>`;
            }
            if (totalPages > 6) {
              liTag += `<li class="dots"><span></span></li>`;
            }
          } else if (currentPage >= totalPages - 2) {
            if (totalPages > 5) {
              liTag += `<li class="dots"><span></span></li>`;
            }
            const start = Math.max(totalPages - 4, 2);
            for (let i = start; i <= totalPages - 1; i++) {
              liTag += `<li class="numb ${currentPage === i ? 'active' : ''}" onclick="changePage(${i})">
                    <span>${i}</span>
                  </li>`;
            }
          } else {
            liTag += `<li class="dots"><span></span></li>`;
            for (let i = currentPage - 1; i <= currentPage + 1; i++) {
              if (i > 1 && i < totalPages) {
                liTag += `<li class="numb ${currentPage === i ? 'active' : ''}" onclick="changePage(${i})">
                      <span>${i}</span>
                    </li>`;
              }
            }
            liTag += `<li class="dots"><span></span></li>`;
          }
          if (totalPages > 1) {
            liTag += `<li class="numb ${currentPage === totalPages ? 'active' : ''}" onclick="changePage(${totalPages})">
                  <span>${totalPages}</span>
                </li>`;
          }
          liTag += `<li class="btn next ${currentPage === totalPages ? 'disabled' : ''}" 
                ${currentPage === totalPages ? '' : `onclick="changePage(${currentPage + 1})"`}>
                <span><i class="fas fa-angle-right"></i></span>
              </li>`;

          paginationUl.innerHTML = liTag;
        }

        window.changePage = function(page) {
          currentPage = page;
          fetchRandomComics(page);
          window.scrollTo({
            top: comicContainer.offsetTop - 0,
            behavior: 'smooth'
          });
        };

        function showComicDetail(comicData) {

          document.getElementById('detail-comic-title').textContent = comicData.title;
          document.getElementById('detail-comic-author').textContent = comicData.author || 'Unknown';
          document.getElementById('detail-comic-illustrator').textContent = comicData.illustrator || 'Unknown';
          document.getElementById('detail-comic-description').textContent = comicData.description ||
            'No description available.';

          const statusElement = document.getElementById('detail-comic-status');
          statusElement.textContent = comicData.status || 'Ongoing';
          statusElement.className = 'comic-detail-status ' + (comicData.status === 'Completed' ? 'completed' :
            'ongoing');

          const genresContainer = document.getElementById('detail-comic-genres');
          genresContainer.innerHTML = '';
          comicData.genres.forEach(genre => {
            const genreTag = document.createElement('span');
            genreTag.className = 'comic-detail-genre';
            genreTag.textContent = genre;
            genresContainer.appendChild(genreTag);
          });

          const coverElement = document.getElementById('detail-comic-cover');
          coverElement.style.backgroundColor = getRandomColor();
          coverElement.innerHTML =
            `<span style="color: white; font-size: 2rem;">${comicData.title.charAt(0)}</span>`;

          const chapterList = document.getElementById('chapter-list');
          chapterList.innerHTML = '';

          for (let i = comicData.chapters; i >= 1; i--) {
            const chapterItem = document.createElement('div');
            chapterItem.className = 'chapter-item';
            chapterItem.innerHTML = `
        <div>
          <div class="chapter-title">Chapter ${i}</div>
          <div class="chapter-date">${getRandomDate()}</div>
        </div>
        <button class="chapter-read" data-chapter="${i}">Baca</button>
      `;
            chapterList.appendChild(chapterItem);
          }

          document.querySelectorAll('.chapter-read').forEach(button => {
            button.addEventListener('click', function() {
              const chapter = parseInt(this.getAttribute('data-chapter'));
              showComicReader(comicData, chapter);
            });
          });

          document.getElementById('comic-detail-view').classList.add('active');
          document.body.style.overflow = 'hidden';
        }

        let currentReaderState = {
          comicData: null,
          currentChapter: 1,
          currentPage: 1,
          totalPages: 0,
          isBookmarked: false,
          readingMode: 'vertical'
        };
        
        const donationBtn = document.querySelector('.comic-action-btn[title="Donasi"]');
const donationModal = document.getElementById('donation-modal');
const closeDonation = document.getElementById('close-donation');

// Fungsi untuk menampilkan QR Code
function generateQRCode() {
  const qrcodeContainer = document.getElementById("qrcode");

  // Hapus QR Code sebelumnya jika sudah ada
  qrcodeContainer.innerHTML = "";

  // Ambil ukuran kontainer untuk memastikan resolusi tinggi
  const size = Math.floor(qrcodeContainer.offsetWidth || 256); // fallback 256px jika gagal

  // Ganti ini dengan link donasimu
  const donationLink = "https://trakteer.id/namamu"; // GANTI sesuai kebutuhanmu

  new QRCode(qrcodeContainer, {
    text: donationLink,
    width: size,
    height: size,
    colorDark: "#000000",
    colorLight: "#ffffff",
    correctLevel: QRCode.CorrectLevel.H
  });
}

// Event saat tombol Donasi ditekan
if (donationBtn) {
  donationBtn.addEventListener('click', function () {
    donationModal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    
    // Tunggu sedikit agar container muncul dan ukurannya valid
    setTimeout(generateQRCode, 50);
  });
}

// Event untuk menutup modal dengan tombol X
if (closeDonation) {
  closeDonation.addEventListener('click', function () {
    donationModal.style.display = 'none';
    document.body.style.overflow = 'auto';
  });
}

// Event untuk menutup modal jika klik di luar konten modal
donationModal.addEventListener('click', function (e) {
  if (e.target === donationModal) {
    donationModal.style.display = 'none';
    document.body.style.overflow = 'auto';
  }
});

        function showComicReader(comicData, chapter) {

          currentReaderState.comicData = comicData;
          currentReaderState.currentChapter = chapter;
          currentReaderState.currentPage = 1;

          document.getElementById('reader-comic-title').textContent = comicData.title;

          const readerContent = document.getElementById('comic-reader-content');
          readerContent.innerHTML = '';

          currentReaderState.totalPages = Math.floor(Math.random() * 15) + 10;

          const pageSlider = document.getElementById('page-slider');
          pageSlider.max = currentReaderState.totalPages;
          pageSlider.value = 1;

          for (let i = 1; i <= currentReaderState.totalPages; i++) {
            const page = document.createElement('div');
            page.className = 'comic-page';
            page.dataset.page = i;
            page.innerHTML = `
      <div style="
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--text-dark);
        font-size: 1.2rem;
        background-color: var(--card);
        padding: 20px;
        text-align: center;
      ">
        ${comicData.title}<br>
        Chapter ${chapter}<br>
        Page ${i}
      </div>
    `;
            readerContent.appendChild(page);
          }

          setReadingMode(currentReaderState.readingMode);

          loadChapterList();

          updatePageInfo();
          updateNavButtons();

          document.getElementById('comic-reader-view').classList.add('active');
          document.body.style.overflow = 'hidden';

          setTimeout(() => {
            scrollToPage(1);
          }, 50);

          setupReaderEventListeners();
        }

        function setupReaderEventListeners() {

          document.getElementById('reader-prev-chapter').addEventListener('click', goToPreviousChapter);
          document.getElementById('reader-next-chapter').addEventListener('click', goToNextChapter);

          document.getElementById('reader-back-btn').addEventListener('click', closeReader);

          document.getElementById('reader-bookmark-btn').addEventListener('click', toggleBookmark);

          const pageSlider = document.getElementById('page-slider');
          pageSlider.addEventListener('input', function() {
            const page = parseInt(this.value);
            currentReaderState.currentPage = page;
            scrollToPage(page);
            updatePageInfo();
          });

          document.getElementById('chapter-menu-btn').addEventListener('click', function() {
            document.getElementById('chapter-list-panel').classList.add('show');
          });

          document.getElementById('reading-mode-btn').addEventListener('click', function() {
            document.getElementById('reading-mode-panel').classList.add('show');
          });

          document.getElementById('close-chapter-panel').addEventListener('click', function() {
            document.getElementById('chapter-list-panel').classList.remove('show');
          });

          document.getElementById('close-mode-panel').addEventListener('click', function() {
            document.getElementById('reading-mode-panel').classList.remove('show');
          });

          document.querySelectorAll('.mode-option').forEach(option => {
            option.addEventListener('click', function() {
              const mode = this.dataset.mode;
              setReadingMode(mode);
              document.querySelectorAll('.mode-option').forEach(opt => opt.classList.remove('active'));
              this.classList.add('active');
              currentReaderState.readingMode = mode;
              document.getElementById('reading-mode-panel').classList.remove('show');
            });
          });

          const readerContent = document.getElementById('comic-reader-content');
          let scrollTimeout;
          readerContent.addEventListener('scroll', function() {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
              const visiblePage = getVisiblePage();
              if (visiblePage && visiblePage !== currentReaderState.currentPage) {
                currentReaderState.currentPage = visiblePage;
                pageSlider.value = visiblePage;
                updatePageInfo();
                updateNavButtons();
              }
            }, 100);
          });

          document.addEventListener('keydown', handleKeyboardNavigation);
        }

        function loadChapterList() {
          const panelContent = document.getElementById('chapter-panel-content');
          panelContent.innerHTML = '';

          const chapterList = document.createElement('div');
          chapterList.className = 'chapter-list';

          for (let i = currentReaderState.comicData.chapters; i >= 1; i--) {
            const chapterItem = document.createElement('div');
            chapterItem.className = 'chapter-item';
            if (i === currentReaderState.currentChapter) {
              chapterItem.classList.add('current');
            }
            chapterItem.textContent = `Chapter ${i}`;
            chapterItem.addEventListener('click', function() {
              showComicReader(currentReaderState.comicData, i);
            });
            chapterList.appendChild(chapterItem);
          }

          panelContent.appendChild(chapterList);
        }

        function setReadingMode(mode) {
          const readerContent = document.getElementById('comic-reader-content');
          readerContent.className = 'reader-content';

          switch (mode) {
            case 'vertical':
              readerContent.classList.add('vertical-mode');
              break;
            case 'horizontal':
              readerContent.classList.add('horizontal-mode');
              break;
            case 'webtoon':
              readerContent.classList.add('webtoon-mode');
              break;
          }
        }

        function goToPreviousChapter() {
          if (currentReaderState.currentChapter > 1) {
            showComicReader(
              currentReaderState.comicData,
              currentReaderState.currentChapter - 1
            );
          }
        }

        function goToNextChapter() {
          if (currentReaderState.currentChapter < currentReaderState.comicData.chapters) {
            showComicReader(
              currentReaderState.comicData,
              currentReaderState.currentChapter + 1
            );
          }
        }

        function getVisiblePage() {
          const readerContent = document.getElementById('comic-reader-content');
          const pages = readerContent.children;
          const readerRect = readerContent.getBoundingClientRect();
          const readerCenter = readerRect.top + readerRect.height / 2;

          for (let i = 0; i < pages.length; i++) {
            const pageRect = pages[i].getBoundingClientRect();
            if (pageRect.top <= readerCenter && pageRect.bottom >= readerCenter) {
              return parseInt(pages[i].dataset.page);
            }
          }
          return 1;
        }

        function scrollToPage(pageNumber) {
          const pages = document.querySelectorAll('.comic-page');
          if (pages.length >= pageNumber) {
            pages[pageNumber - 1].scrollIntoView({
              behavior: 'smooth'
            });
          }
        }

        function updatePageInfo() {
          document.getElementById('reader-page-info').textContent =
            `${currentReaderState.currentPage}/${currentReaderState.totalPages}`;
        }

        function updateNavButtons() {

          document.getElementById('reader-prev-chapter').disabled =
            currentReaderState.currentChapter <= 1;
          document.getElementById('reader-next-chapter').disabled =
            currentReaderState.currentChapter >= currentReaderState.comicData.chapters;
        }

        function toggleBookmark() {
          currentReaderState.isBookmarked = !currentReaderState.isBookmarked;
          const bookmarkBtn = document.getElementById('reader-bookmark-btn');

          if (currentReaderState.isBookmarked) {
            bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i>';
            bookmarkBtn.classList.add('bookmarked');
          } else {
            bookmarkBtn.innerHTML = '<i class="far fa-bookmark"></i>';
            bookmarkBtn.classList.remove('bookmarked');
          }
        }

        function handleKeyboardNavigation(e) {
          if (!document.getElementById('comic-reader-view').classList.contains('active')) return;

          switch (e.key) {
            case 'ArrowLeft':
              if (currentReaderState.currentPage > 1) {
                currentReaderState.currentPage--;
                scrollToPage(currentReaderState.currentPage);
                document.getElementById('page-slider').value = currentReaderState.currentPage;
                updatePageInfo();
              }
              break;
            case 'ArrowRight':
              if (currentReaderState.currentPage < currentReaderState.totalPages) {
                currentReaderState.currentPage++;
                scrollToPage(currentReaderState.currentPage);
                document.getElementById('page-slider').value = currentReaderState.currentPage;
                updatePageInfo();
              }
              break;
            case 'Escape':
              document.getElementById('chapter-list-panel').classList.remove('show');
              document.getElementById('reading-mode-panel').classList.remove('show');
              break;
          }
        }

        function closeReader() {
          document.getElementById('comic-reader-view').classList.remove('active');
          document.body.style.overflow = 'auto';

          document.removeEventListener('keydown', handleKeyboardNavigation);
        }

        function updateSlider() {
          const slider = document.getElementById('page-slider');
          const progress = document.querySelector('.slider-progress');
          const currentPageEl = document.getElementById('current-page');
          const totalPagesEl = document.getElementById('total-pages');

          slider.max = currentReaderState.totalPages;
          slider.value = currentReaderState.currentPage;

          const progressPercent = (currentReaderState.currentPage / currentReaderState.totalPages) * 100;
          progress.style.width = `${progressPercent}%`;

          currentPageEl.textContent = currentReaderState.currentPage;
          totalPagesEl.textContent = currentReaderState.totalPages;
        }

        function updatePageInfo() {
          updateSlider();
          updateNavButtons();
        }

        settingsItems.forEach(item => {
          item.addEventListener('click', function() {

            if (this.querySelector('input[type="checkbox"]')) return;

            let viewId = '';
            const text = this.querySelector('.settings-item-text').textContent;

            switch (text) {
              case 'Profil Saya':
                viewId = 'profile-view';
                break;
              case 'Notifikasi':
                viewId = 'notifications-view';
                break;
              case 'Bahasa':
                viewId = 'language-view';
                break;
              case 'Lab':
                viewId = 'beta-lab-view';
                break;
              case 'Pencapaian':
                viewId = 'achievements-view';
                break;
              case 'Kebijakan Privasi':
                viewId = 'privacy-view';
                break;
              case 'Syarat & Ketentuan':
                viewId = 'terms-view';
                break;
              case 'Versi Aplikasi':
                viewId = 'version-view';
                break;
              default:
                return;
            }

            const subView = document.getElementById(viewId);
            if (subView) {
              subView.classList.add('active');
              document.body.style.overflow = 'hidden';
            }
          });
        });

        document.querySelectorAll('.sub-view-back').forEach(backBtn => {
          backBtn.addEventListener('click', function() {
            const subView = this.closest('.sub-view');
            subView.classList.remove('active');
            document.body.style.overflow = 'auto';
          });
        });

        subViews.forEach(view => {
          view.addEventListener('click', function(e) {
            if (e.target === this) {
              this.classList.remove('active');
              document.body.style.overflow = 'auto';
            }
          });
        });

        function getRandomColor() {
          const colors = ['#FF5E5B', '#FF8E42', '#FFC154', '#47B8E0', '#7ACBEE', '#9C6ADE'];
          return colors[Math.floor(Math.random() * colors.length)];
        }

        function getRandomDate() {
          const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
          const month = months[Math.floor(Math.random() * months.length)];
          const day = Math.floor(Math.random() * 28) + 1;
          const year = 2020 + Math.floor(Math.random() * 4);
          return `${month} ${day}, ${year}`;
        }

        function getRandomGenres() {
          const count = Math.floor(Math.random() * 3) + 2;
          const shuffled = [...genres].sort(() => 0.5 - Math.random());
          return shuffled.slice(0, count);
        }

        function updateScrollShadows() {
          const scrollTop = chapterList.scrollTop;
          const scrollHeight = chapterList.scrollHeight;
          const clientHeight = chapterList.clientHeight;

          topShadow.style.opacity = scrollTop > 0 ? '1' : '0';
          bottomShadow.style.opacity = (scrollTop + clientHeight) < scrollHeight ? '1' : '0';
        }

        chapterList.addEventListener('scroll', updateScrollShadows);

        const observer = new IntersectionObserver((entries) => {
          if (entries[0].isIntersecting) {
            setTimeout(updateScrollShadows, 50);
            observer.disconnect();
          }
        }, {
          root: null,
          threshold: 0.1
        });

        observer.observe(chapterList);

        initGenrePopup();
        updateSelectedGenresDisplay();
        generateRecommendations();
        fetchRandomComics(currentPage);
      });
    </script>
    
    <script>
  document.addEventListener('DOMContentLoaded', () => {
    const bookmarkBtn = document.querySelector('.comic-action-btn[title="Bookmark"]');

    bookmarkBtn.addEventListener('click', () => {
      bookmarkBtn.classList.toggle('bookmarked');
    });
  });
</script>
  </body>

</html>
